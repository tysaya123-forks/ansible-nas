"use strict";(self.webpackChunkansible_nas=self.webpackChunkansible_nas||[]).push([[8343],{1922:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>r,default:()=>u,frontMatter:()=>o,metadata:()=>s,toc:()=>l});var i=t(5893),a=t(1151);const o={sidebar_position:4},r="External Access",s={id:"getting-started/external-access",title:"External Access",description:"There are a number of steps required to enable external access to the applications running on your NAS:",source:"@site/docs/getting-started/external-access.md",sourceDirName:"getting-started",slug:"/getting-started/external-access",permalink:"/docs/getting-started/external-access",draft:!1,unlisted:!1,editUrl:"https://github.com/davestephens/ansible-nas/tree/main/website/docs/getting-started/external-access.md",tags:[],version:"current",sidebarPosition:4,frontMatter:{sidebar_position:4},sidebar:"tutorialSidebar",previous:{title:"Configure A Dashboard",permalink:"/docs/getting-started/configure-dashboard"},next:{title:"Applications",permalink:"/docs/category/applications"}},c={},l=[{value:"Domain Name and DNS Configuration",id:"domain-name-and-dns-configuration",level:2},{value:"Enable Traefik",id:"enable-traefik",level:2},{value:"Router Configuration",id:"router-configuration",level:2},{value:"Enable Access To Specific Applications",id:"enable-access-to-specific-applications",level:2}];function d(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",li:"li",ol:"ol",p:"p",strong:"strong",...(0,a.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h1,{id:"external-access",children:"External Access"}),"\n",(0,i.jsx)(n.p,{children:"There are a number of steps required to enable external access to the applications running on your NAS:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#domain-name-and-dns-configuration",children:"Domain Name and DNS Configuration"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#enable-traefik",children:"Enable Traefik"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#router-configuration",children:"Router Configuration"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#enable-access-to-specific-applications",children:"Enable specific applications for external access"})}),"\n"]}),"\n",(0,i.jsxs)(n.admonition,{type:"danger",children:[(0,i.jsxs)(n.p,{children:["Enabling access to applications externally ",(0,i.jsx)(n.strong,{children:"does not"})," automatically secure them. If you can access an application from within your own network without a username and password, this will also be the case externally."]}),(0,i.jsx)(n.p,{children:"It is your responsibility to ensure that applications you enable external access to are secured appropriately!"})]}),"\n",(0,i.jsx)(n.h2,{id:"domain-name-and-dns-configuration",children:"Domain Name and DNS Configuration"}),"\n",(0,i.jsxs)(n.p,{children:["Set ",(0,i.jsx)(n.code,{children:"ansible_nas_domain"})," to the domain name you want to use for your Ansible-NAS. You'll need somewhere to host the DNS for that domain - Cloudflare is a good free solution. Once you have an account and Cloudflare is hosting the DNS for your domain, create a wildcard DNS entry (",(0,i.jsx)(n.code,{children:"*.myawesomedomain.com"}),") and set it to your current IP address."]}),"\n",(0,i.jsxs)(n.p,{children:["You then need to enable and configure the Cloudflare Dynamic DNS container (",(0,i.jsx)(n.code,{children:"cloudflare_ddns_enabled: true"}),") so the wildcard DNS entry for your domain name is updated if/when your ISP issues you a new IP address."]}),"\n",(0,i.jsx)(n.h2,{id:"enable-traefik",children:"Enable Traefik"}),"\n",(0,i.jsx)(n.p,{children:"Traefik routes traffic from ports 80 (HTTP) and 443 (HTTPS) on your Ansible-NAS box to the relevant application, based on hostname."}),"\n",(0,i.jsxs)(n.p,{children:["Simply set ",(0,i.jsx)(n.code,{children:"traefik_enabled: true"})," in your ",(0,i.jsx)(n.code,{children:"all.yml"}),". By default it listens on ports 80 and 443, but doesn't route any traffic."]}),"\n",(0,i.jsxs)(n.p,{children:["Ensure you set the relevant environment variables for your DNS provider in ",(0,i.jsx)(n.code,{children:"traefik_environment_variables"}),". More info in the ",(0,i.jsx)(n.a,{href:"https://doc.traefik.io/traefik/https/acme/",children:"Traefik ACME docs"}),"."]}),"\n",(0,i.jsx)(n.h2,{id:"router-configuration",children:"Router Configuration"}),"\n",(0,i.jsx)(n.p,{children:"You need to map ports 80 and 443 from your router to your Ansible-NAS box."}),"\n",(0,i.jsx)(n.p,{children:"How to do this is entirely dependent on your router (and out of scope of these docs), but if you're using Ansible-NAS then this should be within your skillset. :)"}),"\n",(0,i.jsx)(n.h2,{id:"enable-access-to-specific-applications",children:"Enable Access To Specific Applications"}),"\n",(0,i.jsxs)(n.p,{children:["Every application has a ",(0,i.jsx)(n.code,{children:"<application_name>_available_externally"})," setting in its ",(0,i.jsx)(n.code,{children:"defaults/main.yml"}),". Setting this to ",(0,i.jsx)(n.code,{children:"true"})," (by overriding it in your nas.yml) will configure Traefik to route ",(0,i.jsx)(n.code,{children:"<application>.yourdomain.com"})," to the application, making it available externally."]})]})}function u(e={}){const{wrapper:n}={...(0,a.a)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},1151:(e,n,t)=>{t.d(n,{Z:()=>s,a:()=>r});var i=t(7294);const a={},o=i.createContext(a);function r(e){const n=i.useContext(o);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:r(e.components),i.createElement(o.Provider,{value:n},e.children)}}}]);